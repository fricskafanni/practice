{"changed":true,"filter":false,"title":"edit_user.php.1","tooltip":"/dev/probaphp/edit_user.php.1","value":"<?php\nrequire_once __DIR__ . '/config.php';\nrequire_once __DIR__ . '/connection.php';\n\nif(!isset($_SESSION['user'])) {\n    header('Location: index.php');\n    exit();\n}\n?>\n<!DOCTYPE html>\n<html>\n<head>\n        <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css\">\n        <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css\">\n        <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js\"></script>\n        <script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js\"></script>\n        <link rel=\"stylesheet\" href=\"styles.css\" type=\"text/css\" />\n    \n    <title>User Page</title>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"table-responsive\">\n            <div class=\"header flex-row\">\n                <h2>User Information</h2>\n                <button type=\"button\" class=\"btn btn-danger\">\n                    <a href=\"logout.php\">Logout</a>\n                </button>\n            </div>\n            \n            <form class=\"box\" id=\"user_data\">\n                        <div class=\"form-group\">\n                            <label for=\"email\">Email:</label>\n                            <input type=\"text\" name=\"email\" id=\"email\" value=\"<?php echo $_SESSION['user']['email'] ?>\" placeholder=\"Email\" class=\"form-control\" required/>\n                        </div>                    \n                        <div class=\"form-group\">\n                            <label for=\"password\">Password:</label>\n                            <input type=\"text\" name=\"password\" id=\"password\" value=\"<?php echo $_SESSION['user']['pass']  ?>\" placeholder=\"\" class=\"form-control\" required/>\n                        </div>                    \n                        <div class=\"form-group\">\n                            <label for=\"name\">Name:</label>\n                            <input type=\"text\" name=\"name\" id=\"name\" value=\"<?php echo $_SESSION['user']['name']  ?>\" placeholder=\"\" class=\"form-control\" required/>\n                        </div>                    \n                        <div class=\"form-group\">\n                            <label for=\"lastname\">Lastname:</label>\n                            <input type=\"text\" name=\"lastname\" id=\"lastname\" value=\"<?php echo $_SESSION['user']['lastname']  ?>\" placeholder=\"\" class=\"form-control\" required/>\n                        </div>                    \n                        <div class=\"form-group\">\n                            <label for=\"password\">Date of birth:</label>\n                            <input type=\"text\" name=\"dob\" id=\"dob\" value=\"<?php echo $_SESSION['user']['dob']  ?>\" placeholder=\"\" class=\"form-control\" required/>\n                        </div>\n            </form>\n        </div>\n        \n        <div class=\"update\">\n            <button class=\"btn btn-primary\" type=\"submit\" id=\"update\">Update</button>\n        </div>\n    </div>\n\n<script src=\"https://code.jquery.com/jquery-3.7.1.js\"></script>\n\n<script type=\"text/javascript\">\n    $(document).ready(function(){\n        $(\"#update\").on(\"click\", function(){\n            var $form_inputs = $('#user_data').find(':input');\n            var email = $('#email').val();\n            var password = $('#pass').val();\n            var name = $('#name').val();\n            var lastname = $('#lastname').val();\n            var dob = $('#dob').val();\n             //alert(lastname);\n             console.log($form_inputs[2]);\n            var form_data = {email: email, password: password, name: name, lastname: lastname, dob: dob};\n            $form_inputs.each(function () {\n                if (this.type == 'checkbox')\n                    form_data[this.name] = $(this).is(':checked') ? 1 : 0;\n                else\n                    form_data[this.name] = $(this).val();\n            });\n            \n            if(email == '' || password == '') {\n                alert(\"Both fields are required!\");\n            } else {\n                $.ajax({\n                    url: 'update_user.php',\n                    method: 'POST',\n                    data: form_data,\n                    success: function(data) {\n                        if(data.error == 1) {\n                            console.log(\"there's an error\")\n                        }else {\n                            console.log(data);\n                            \n                            //window.location.href =\"user_page.php\";\n                        }\n                        \n                    }\n                });\n            }\n        });\n    });\n    \n</script>\n</body>\n</html>\n","undoManager":{"mark":-2,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":105,"column":0},"action":"insert","lines":["<?php","require_once __DIR__ . '/config.php';","require_once __DIR__ . '/connection.php';","","if(!isset($_SESSION['user'])) {","    header('Location: index.php');","    exit();","}","?>","<!DOCTYPE html>","<html>","<head>","        <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css\">","        <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css\">","        <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js\"></script>","        <script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js\"></script>","        <link rel=\"stylesheet\" href=\"styles.css\" type=\"text/css\" />","    ","    <title>User Page</title>","</head>","<body>","    <div class=\"container\">","        <div class=\"table-responsive\">","            <div class=\"header flex-row\">","                <h2>User Information</h2>","                <button type=\"button\" class=\"btn btn-danger\">","                    <a href=\"logout.php\">Logout</a>","                </button>","            </div>","            ","            <form class=\"box\" id=\"user_data\">","                        <div class=\"form-group\">","                            <label for=\"email\">Email:</label>","                            <input type=\"text\" name=\"email\" id=\"email\" value=\"<?php echo $_SESSION['user']['email'] ?>\" placeholder=\"Email\" class=\"form-control\" required/>","                        </div>                    ","                        <div class=\"form-group\">","                            <label for=\"password\">Password:</label>","                            <input type=\"text\" name=\"password\" id=\"password\" value=\"<?php echo $_SESSION['user']['pass']  ?>\" placeholder=\"\" class=\"form-control\" required/>","                        </div>                    ","                        <div class=\"form-group\">","                            <label for=\"name\">Name:</label>","                            <input type=\"text\" name=\"name\" id=\"name\" value=\"<?php echo $_SESSION['user']['name']  ?>\" placeholder=\"\" class=\"form-control\" required/>","                        </div>                    ","                        <div class=\"form-group\">","                            <label for=\"lastname\">Lastname:</label>","                            <input type=\"text\" name=\"lastname\" id=\"lastname\" value=\"<?php echo $_SESSION['user']['lastname']  ?>\" placeholder=\"\" class=\"form-control\" required/>","                        </div>                    ","                        <div class=\"form-group\">","                            <label for=\"password\">Date of birth:</label>","                            <input type=\"text\" name=\"dob\" id=\"dob\" value=\"<?php echo $_SESSION['user']['dob']  ?>\" placeholder=\"\" class=\"form-control\" required/>","                        </div>","            </form>","        </div>","        ","        <div class=\"update\">","            <button class=\"btn btn-primary\" type=\"submit\" id=\"update\">Update</button>","        </div>","    </div>","","<script src=\"https://code.jquery.com/jquery-3.7.1.js\"></script>","","<script type=\"text/javascript\">","    $(document).ready(function(){","        $(\"#update\").on(\"click\", function(){","            var $form_inputs = $('#user_data').find(':input');","            var email = $('#email').val();","            var password = $('#pass').val();","            var name = $('#name').val();","            var lastname = $('#lastname').val();","            var dob = $('#dob').val();","             //alert(lastname);","             console.log($form_inputs[2]);","            var form_data = {email: email, password: password, name: name, lastname: lastname, dob: dob};","            $form_inputs.each(function () {","                if (this.type == 'checkbox')","                    form_data[this.name] = $(this).is(':checked') ? 1 : 0;","                else","                    form_data[this.name] = $(this).val();","            });","            ","            if(email == '' || password == '') {","                alert(\"Both fields are required!\");","            } else {","                $.ajax({","                    url: 'update_user.php',","                    method: 'POST',","                    data: form_data,","                    success: function(data) {","                        if(data.error == 1) {","                            console.log(\"there's an error\")","                        }else {","                            console.log(data);","                            ","                            //window.location.href =\"user_page.php\";","                        }","                        ","                    }","                });","            }","        });","    });","    ","</script>","</body>","</html>",""],"id":1}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":95,"column":24},"end":{"row":95,"column":24},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1709201221113}